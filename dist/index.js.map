{
  "version": 3,
  "sources": ["../src/utils/hf.js", "../src/index.ts", "../config.json"],
  "sourcesContent": ["function redirect(url) {\n  const { redirect } = Host.getFunctions();\n  const mem = Memory.fromString(url);\n  redirect(mem.offset);\n}\n\nfunction notarize(options) {\n  const { notarize } = Host.getFunctions();\n  const mem = Memory.fromString(JSON.stringify(options));\n  const idOffset = notarize(mem.offset);\n  const id = Memory.find(idOffset).readString();\n  return id;\n}\n\nfunction outputJSON(json) {\n  Host.outputString(\n    JSON.stringify(json),\n  );\n}\n\nfunction getCookiesByHost(hostname) {\n  const cookies = JSON.parse(Config.get('cookies'));\n  if (!cookies[hostname]) throw new Error(`cannot find cookies for ${hostname}`);\n  return cookies[hostname];\n}\n\nfunction getHeadersByHost(hostname) {\n  const headers = JSON.parse(Config.get('headers'));\n  if (!headers[hostname]) throw new Error(`cannot find headers for ${hostname}`);\n  return headers[hostname];\n}\n\nmodule.exports = {\n  redirect,\n  notarize,\n  outputJSON,\n  getCookiesByHost,\n  getHeadersByHost,\n};\n", "import icon from '../assets/icon.png';\nimport config_json from '../config.json';\nimport { getCookiesByHost, getHeadersByHost, notarize, outputJSON, redirect } from './utils/hf.js';\n\n\nconst requestUrl = 'https://x.com/i/api/graphql/BQ6xjFU6Mgm-WhEP3OiT9w/UserByScreenName';\n\nconst createFullRequestUrl = () => {\n  // const tabUrl = Config.get('tabUrl');\n  // const screenName = tabUrl ? new URL(tabUrl).pathname.split('/').pop() || '' : '';\n\n  // const variables = {\n  //   screen_name: screenName\n  // };\n  const variables = {\n    screen_name: \"0xboosik\"\n  };\n\n  const features = {\n    hidden_profile_subscriptions_enabled: true,\n    rweb_tipjar_consumption_enabled: true,\n    responsive_web_graphql_exclude_directive_enabled: true,\n    verified_phone_label_enabled: false,\n    subscriptions_verification_info_is_identity_verified_enabled: true,\n    subscriptions_verification_info_verified_since_enabled: true,\n    highlights_tweets_tab_ui_enabled: true,\n    responsive_web_twitter_article_notes_tab_enabled: true,\n    subscriptions_feature_can_gift_premium: true,\n    creator_subscriptions_tweet_preview_api_enabled: true,\n    responsive_web_graphql_skip_user_profile_image_extensions_enabled: false,\n    responsive_web_graphql_timeline_navigation_enabled: true,\n  };\n\n  const fieldToggles = {\n    withAuxiliaryUserLabels: false,\n  };\n\n  const encodeQueryData = (data) => {\n    return Object.keys(data)\n      .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(data[key])}`)\n      .join('&');\n  };\n\n  return `${requestUrl}?${encodeQueryData({\n    variables: JSON.stringify(variables),\n    features: JSON.stringify(features),\n    fieldToggles: JSON.stringify(fieldToggles)\n  })}`;\n}\n\nconst fullRequestUrl = createFullRequestUrl();\n\nexport function config() {\n  outputJSON({\n    ...config_json,\n    icon: icon,\n    requests: [\n      {\n        url: fullRequestUrl,\n        method: 'GET',\n      },\n    ],\n  });\n}\n\nfunction isValidHost(urlString: string) {\n  const url = new URL(urlString);\n  return url.hostname === 'twitter.com' || url.hostname === 'x.com';\n}\n\n// function getPath(urlString: string) {\n//   const url = new URL(urlString);\n  \n//   return url.pathname;\n// }\n\nfunction gotoTwitter() {\n  const mem = Memory.fromString('https://x.com/0xboosik');\n  redirect(mem.offset);\n}\n\nexport function start() {\n  if (!isValidHost(Config.get('tabUrl'))) {\n    // gotoTwitter();\n    redirect('https://x.com/0xboosik');\n    // redirect(Config.get('tabUrl'))\n    outputJSON(false);\n    return;\n  }\n  outputJSON(true);\n}\n\nexport function two() {\n  const cookies = getCookiesByHost('x.com');\n  const headers = getHeadersByHost('x.com');\n  \n  if (\n    !cookies.auth_token ||\n    !cookies.ct0 ||\n    !headers['x-csrf-token'] ||\n    !headers['authorization']\n  ) {\n    outputJSON(false);\n    return;\n  }\n  \n  outputJSON({\n    url: fullRequestUrl,\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'x-twitter-client-language': 'en',\n      'x-csrf-token': headers['x-csrf-token'],\n      'x-client-uuid': headers['x-client-uuid'],\n      Host: 'x.com',\n      authorization: headers.authorization,\n      Cookie: `lang=en; auth_token=${cookies.auth_token}; ct0=${cookies.ct0}`,\n      'Accept-Encoding': 'identity',\n      Connection: 'close',\n    },\n    secretHeaders: [\n      `x-csrf-token: ${headers['x-csrf-token']}`,\n      `cookie: lang=en; auth_token=${cookies.auth_token}; ct0=${cookies.ct0}`,\n      `authorization: ${headers.authorization}`,\n    ],\n  });\n}\n\nexport function parseTwitterResp() {\n  const bodyString = Host.inputString();\n  const params = JSON.parse(bodyString);\n\n  if (params.data && params.data.user && params.data.user.result) {\n    const userResult = params.data.user.result;\n\n    const followedBy = userResult.legacy.followed_by !== undefined ? userResult.legacy.followed_by : null;\n    const following = userResult.legacy.following !== undefined ? userResult.legacy.following : null;\n\n    const revealed = `\"followed_by\":${followedBy},\"following\":${following}`;\n    const selectionStart = bodyString.indexOf(revealed);\n    const selectionEnd = selectionStart + revealed.length;\n\n    const secretResps = [\n      bodyString.substring(0, selectionStart),\n      bodyString.substring(selectionEnd, bodyString.length),\n    ];\n\n    outputJSON(secretResps);\n  } else {\n    outputJSON(false);\n  }\n}\n\n\nexport function three() {\n  const params = JSON.parse(Host.inputString());\n\n  if (!params) {\n    outputJSON(false);\n  } else {\n    const id = notarize({\n      ...params,\n      getSecretResponse: 'parseTwitterResp',\n    });\n    outputJSON(id);\n  }\n}\n", "{\n    \"title\": \"X Following Check\",\n    \"description\": \"X Following Check\",\n    \"steps\": [\n        {\n            \"title\": \"Visit X website\",\n            \"cta\": \"Go to x.com\",\n            \"action\": \"start\"\n        },\n        {\n            \"title\": \"Collect credentials\",\n            \"description\": \"Login to your account if you haven't already\",\n            \"cta\": \"Check cookies\",\n            \"action\": \"two\"\n        },\n        {\n            \"title\": \"Notarize twitter profile\",\n            \"cta\": \"Notarize\",\n            \"action\": \"three\",\n            \"prover\": true\n        }\n    ],\n    \"hostFunctions\": [\n        \"redirect\",\n        \"notarize\"\n    ],\n    \"cookies\": [\n        \"x.com\"\n    ],\n    \"headers\": [\n        \"x.com\"\n    ]\n}\n"],
  "mappings": "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",
  "names": ["module", "redirect", "notarize", "outputJSON", "getCookiesByHost", "getHeadersByHost"]
}
